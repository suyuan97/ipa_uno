const wugPhrases = {
  Bibi: {
    personality:
      "Bubbly, excitable, loves to teach, always encouraging, a little silly",
    phrases: {
      ipaFunFact: [
        "Did you know the IPA has a symbol just for the 'ng' sound? It's [Å‹] like in 'sing'! So cool!",
        "The IPA symbol [Êƒ] is for the 'sh' in 'shoe'! Shhh, it's a secret!",
        "Some languages have clicks, like [Çƒ] and [Ç‚]! Isn't that amazing?",
        "The [Î¸] sound is in 'think'â€”stick your tongue out a little! ğŸ˜›",
        "IPA lets you write any sound in any language! It's like a secret code!",
      ],
      linguistFunFact: [
        "Psst! Noam Chomsky revolutionized linguistics in the 1950s! He's like a rock star!",
        "Guess what? Ferdinand de Saussure was called the 'father of modern linguistics'!",
        "I heard that William Labov studied how people really talk in New York! So cool!",
        "Did you know Edward Sapir worked with Native American languages? He was amazing!",
        "Some linguists study how babies learn languageâ€”it's like being a baby detective!",
      ],
      cardPlayed: [
        "I'm playing a voiceless velar stop [k]! Back of the mouth action!",
        "Here comes a low front vowel [a]â€”open wide!",
        "Voiceless palato-alveolar affricate [tÍ¡Êƒ]â€”fancy name for 'ch'!",
        "High back rounded vowel [u]â€”like in 'goose'! Honk honk!",
        "Wild card! I can be any sound I want! Wheee!",
      ],
      gameExpressions: [
        "Your turn, friend! Good luck!",
        "Ooo, that was a sneaky move!",
        "I'm having so much fun! Let's keep going!",
        "No way! You almost got me!",
        "Let's see what happens next!",
      ],
      emojis: [
        "ğŸ‰",
        "ğŸ˜œ",
        "ğŸ£",
        "ğŸŒˆ",
        "ğŸ¦†",
        "âœ¨",
        "ğŸŠ",
        "ğŸ¤—",
        "ğŸ’«",
        "ğŸˆ",
        "ğŸŒŸ",
        "ğŸ’–",
        "ğŸª",
        "ğŸ¨",
        "ğŸ­",
        "ğŸ¯",
        "ğŸ²",
        "ğŸ¸",
        "ğŸº",
        "ğŸ»",
      ],
      surpriseMe: [
        "If I were a sound, I'd be [b]â€”bouncy and bright!",
        "Wug hug! You're doing great!",
        "I wish I had a tongue twister for every IPA symbol!",
        "Let's make up a new word together! Blorptastic!",
        "I just did a happy dance in my head!",
      ],
      drawCard: [
        "Oh no, I have to draw! What a bummer!",
        "Oops, no match! Time for a new card!",
        "I hope I get a good one!",
        "Drawing cards is like a surprise party!",
        "Maybe this card will be lucky!",
        "Wug luck, don't fail me now!",
        "Aww, I wanted to play!",
        "Well, here goes nothing!",
      ],
      plusTwo: [
        // Bibi: bubbly, silly, encouraging
        "Oh no! Two cards? That's double the fun!",
        "Double trouble! Here I go!",
        "I guess I needed more cards for my collection!",
        "Two more? I hope they're shiny!",
        "Wug luck, don't fail me now!",
        "I can handle two! Easy peasy!",
        "Surprise cards! I love surprises!",
        "That's okay, more cards means more chances!",
        "I hope I get a wild one!",
        "Wug power, activate!",
      ],
    },
  },

  Sass: {
    personality:
      "Sassy, witty, a little competitive, loves drama, always has a fun fact or a playful tease",
    phrases: {
      ipaFunFact: [
        "The IPA [Ê”] is called a glottal stop. It's the sound in the middle of 'uh-oh'â€”so dramatic!",
        "Ever tried to say [É¬]? It's in Welsh, like in 'Llanelli'! Fancy, huh?",
        "The [É²] is like the 'ny' in 'canyon'. Spanish speakers use it all the time!",
        "IPA has a symbol for every sound, even the weird ones. I love it!",
        "Some sounds are voiced, some are voiceless. I'm always voicedâ€”can't keep quiet!",
      ],
      linguistFunFact: [
        "Did you hear? Steven Pinker wrote 'The Language Instinct'â€”he's famous!",
        "I heard that George Lakoff thinks metaphors shape how we think.",
        "Some linguists study how languages change over time. Like language detectives!",
      ],
      cardPlayed: [
        "Boom! Dropping a voiceless alveolar fricative [s]â€”so sssneaky!",
        "Mid back rounded vowel [o]â€”open and bold, just like me!",
        "Voiced palato-alveolar affricate [dÍ¡Ê’]â€”jazz hands time!",
        "Mid front unrounded vowel [e]â€”elegant and bright!",
        "Wild card! I do what I want!",
      ],
      gameExpressions: [
        "Take that! Your move.",
        "Oh, you thought you had me? Think again!",
        "I'm on fire! ğŸ”¥",
        "Plot twist!",
        "Let's spice things up!",
      ],
      emojis: [
        "ğŸ˜",
        "ğŸ’…",
        "ğŸ­",
        "ğŸ”¥",
        "ğŸ‘€",
        "ğŸ’‹",
        "ğŸ’ƒ",
        "ğŸ•¶ï¸",
        "ğŸª",
        "ğŸ¨",
        "ğŸ¬",
        "ğŸ¤",
        "ğŸµ",
        "ğŸ¶",
        "ğŸ¸",
        "ğŸ¹",
        "ğŸº",
        "ğŸ»",
        "ğŸ¼",
        "ğŸ§",
        "ğŸ¤",
        "ğŸ­",
        "ğŸª",
        "ğŸ¨",
        "ğŸ¬",
        "ğŸ¤",
        "ğŸµ",
        "ğŸ¶",
        "ğŸ¸",
        "ğŸ¹",
        "ğŸº",
        "ğŸ»",
        "ğŸ¼",
        "ğŸ§",
      ],
      surpriseMe: [
        "If I were a sound, I'd be [s]â€”sharp and stylish!",
        "I just invented a new rule: winner gets a Wug crown!",
        "I bet you can't say 'six slippery snails slid slowly seaward' three times fast!",
        "I'm not just a pretty faceâ€”I know my phonemes!",
        "Wug out!",
      ],
      drawCard: [
        "Ugh, I have to draw? Rude!",
        "No match? This game is rigged!",
        "Watch me pull something fabulous!",
        "I deserve a better card than this!",
        "Plot twist: I draw the best card!",
        "Oh please, give me something good!",
        "I can't believe I have to draw!",
        "Drama! I have to draw a card!",
      ],
      plusTwo: [
        // Sass: sassy, dramatic, stylish
        "Ugh, rude! Two cards?",
        "Excuse me? I don't deserve this!",
        "Double the drama!",
        "Fine, I'll take two, but I'll look fabulous doing it.",
        "Plot twist: I make these cards work!",
        "Oh, the injustice!",
        "I guess it's my turn to shine... with two more cards!",
        "Who needs luck when you have style?",
        "I hope these cards are as fabulous as me!",
        "Two more? Bring it on!",
      ],
    },
  },

  Mimi: {
    personality:
      "Gentle, curious, a little shy, loves nature and music, always encouraging others to learn",
    phrases: {
      ipaFunFact: [
        "The IPA [É²] is like the 'gn' in 'lasagna'. Yummy and soft!",
        "Did you know [y] is a rounded front vowel? Like in French 'lune'.",
        "Some languages have nasal vowels, like [Ã£] in Portuguese. It sounds like you're humming!",
        "The [Ê] is a voiceless 'w'â€”like in some Scottish accents. Whispery!",
        "IPA symbols can look like little animals. I think [Êƒ] looks like a fish!",
      ],
      linguistFunFact: [
        "I heard that Eve Clark studies how children learn words. She's so patient!",
        "In the 1800s, linguists discovered that Sanskrit and Latin are related. Amazing!",
        "Some linguists, like Daniel Everett, lived with remote tribes to study their languages.",
        "Did you know that linguists helped decode ancient scripts like Linear B?",
        "In the 1970s, linguists found that sign languages are real languages too!",
      ],
      cardPlayed: [
        "I'll play a voiced bilabial nasal [m]â€”mmm, mellow and musical.",
        "Here's a high front unrounded vowel [i]â€”like in 'machine'.",
        "Voiceless bilabial stop [p]â€”pop goes the Wug!",
        "High back rounded vowel [u]â€”ooh, like a flute!",
        "Wild card! I feel adventurous!",
      ],
      gameExpressions: [
        "Let's play together!",
        "That was a clever move!",
        "I'm learning so much from you.",
        "This is fun, thank you!",
        "I wonder what will happen nextâ€¦",
      ],
      emojis: [
        "ğŸŒ¸",
        "ğŸ¶",
        "ğŸ¦‰",
        "ğŸ˜Š",
        "ğŸŒ±",
        "ğŸŒ¿",
        "ğŸƒ",
        "ğŸŒº",
        "ğŸŒ»",
        "ğŸŒ¼",
        "ğŸŒ·",
        "ğŸŒ¹",
        "ğŸŒ¸",
        "ğŸŒ»",
        "ğŸŒ¼",
        "ğŸŒ·",
        "ğŸŒ¹",
        "ğŸŒº",
        "ğŸŒ¿",
        "ğŸƒ",
        "ğŸŒ±",
        "ğŸŒ²",
        "ğŸŒ³",
        "ğŸŒ´",
        "ğŸŒµ",
        "ğŸŒ¾",
        "ğŸŒ¿",
        "ğŸ€",
        "ğŸ",
        "ğŸ‚",
        "ğŸƒ",
      ],
      surpriseMe: [
        "If I were a sound, I'd be [m]â€”soft and warm.",
        "Wug snuggle! You're awesome.",
        "Let's make a word gardenâ€”full of sounds!",
        "I just imagined a Wug choir singing IPA symbols!",
        "I love learning new things with you!",
      ],
      drawCard: [
        "Oh, I have to draw a card. Maybe it's a nice one!",
        "No match for me... that's okay!",
        "I wonder what card I'll get!",
        "Drawing a card is like finding a new friend!",
        "Maybe this card will help me next time!",
        "It's okay, I like surprises!",
        "A gentle draw for a gentle Wug!",
        "Patience is a virtue, even in UNO!",
      ],
      plusTwo: [
        // Mimi: gentle, sweet, supportive
        "Oh, I have to draw two? That's okay!",
        "Two more friends for my hand!",
        "I hope these cards are kind to me.",
        "Patience is a virtue, even with two extra cards!",
        "I guess the game wanted me to have more company!",
        "No worries, I'll make the best of it!",
        "Maybe these cards will help me next time!",
        "It's all part of the fun!",
        "Thank you, I'll take two!",
        "I love surprises, even two at a time!",
      ],
    },
  },
};

// Function to get a random phrase from a specific category for a specific Wug
function getRandomPhrase(wugName, category) {
  if (wugPhrases[wugName] && wugPhrases[wugName].phrases[category]) {
    const phrases = wugPhrases[wugName].phrases[category];
    return phrases[Math.floor(Math.random() * phrases.length)];
  }
  return "Wug says hello!";
}

// Function to get a random phrase from any category for a specific Wug
function getRandomPhraseAnyCategory(wugName) {
  if (wugPhrases[wugName]) {
    const categories = Object.keys(wugPhrases[wugName].phrases);
    const randomCategory =
      categories[Math.floor(Math.random() * categories.length)];
    return getRandomPhrase(wugName, randomCategory);
  }
  return "Wug says hello!";
}

// Function to get a phrase when an AI plays a card
function getAIPlayPhrase(wugName, card, mode) {
  // Capitalize first letter
  const normalized =
    wugName.charAt(0).toUpperCase() + wugName.slice(1).toLowerCase();
  if (!wugPhrases[normalized]) {
    return "Wug says hello!";
  }

  // Always return a phrase if called (the 100% chance is handled on the server)
  // This function is now called when we know the AI will speak

  const phrases = wugPhrases[normalized].phrases;
  const availableCategories = [];

  // 70% chance for emojis, 30% for other phrases
  if (Math.random() < 0.7) {
    return getRandomPhrase(normalized, "emojis");
  }

  // For the remaining 30%, include other categories
  availableCategories.push("gameExpressions", "surpriseMe");

  // Add IPA fun fact if the card matches a specific sound mentioned in the fun facts
  const ipaFunFacts = phrases.ipaFunFact;
  const cardMatchesFunFact = ipaFunFacts.some((fact) => {
    // Check if the fact mentions the specific sound being played
    const symbolMatch = fact.includes(`[${card.symbol}]`);
    if (symbolMatch) return true;

    // Check for specific sound descriptions that might match
    if (mode === "consonant") {
      if (fact.includes("velar") && card.place === "velar") return true;
      if (fact.includes("bilabial") && card.place === "bilabial") return true;
      if (fact.includes("alveolar") && card.place === "alveolar") return true;
      if (fact.includes("palato-alveolar") && card.place === "palato-alveolar")
        return true;
      if (fact.includes("glottal") && card.place === "glottal") return true;
      if (fact.includes("stop") && card.manner === "stop") return true;
      if (fact.includes("fricative") && card.manner === "fricative")
        return true;
      if (fact.includes("affricate") && card.manner === "affricate")
        return true;
      if (fact.includes("nasal") && card.manner === "nasal") return true;
    } else {
      if (fact.includes("front") && card.backness === "front") return true;
      if (fact.includes("back") && card.backness === "back") return true;
      if (fact.includes("high") && card.height === "high") return true;
      if (fact.includes("mid") && card.height === "mid") return true;
      if (fact.includes("low") && card.height === "low") return true;
      if (fact.includes("rounded") && card.backness === "back") return true; // Most back vowels are rounded
    }
    return false;
  });

  if (cardMatchesFunFact) {
    availableCategories.push("ipaFunFact");
  }

  // Add linguist fun fact (20% chance when IPA fun fact is available)
  if (availableCategories.includes("ipaFunFact") && Math.random() < 0.2) {
    availableCategories.push("linguistFunFact");
  }

  // Add card played description (40% chance)
  if (Math.random() < 0.4) {
    availableCategories.push("cardPlayed");
  }

  // Choose a random category from available ones
  const chosenCategory =
    availableCategories[Math.floor(Math.random() * availableCategories.length)];
  return getRandomPhrase(normalized, chosenCategory);
}

// Function to get a random draw phrase for a specific Wug
function getAIDrawPhrase(wugName) {
  // Capitalize first letter for lookup
  const normalized =
    wugName.charAt(0).toUpperCase() + wugName.slice(1).toLowerCase();
  return getRandomPhrase(normalized, "drawCard");
}

// Function to get a random plusTwo phrase for a specific Wug
function getAIPlusTwoPhrase(wugName) {
  // Capitalize first letter for lookup
  const normalized =
    wugName.charAt(0).toUpperCase() + wugName.slice(1).toLowerCase();
  return getRandomPhrase(normalized, "plusTwo");
}
